(()=>{var e={427:(e,r,t)=>{t(142).config(),t(185).connect(process.env.MONGOOSE_URL)},954:(e,r,t)=>{const i=t(738),n=i.diskStorage({}),s=i({storage:n,fileFilter:(e,r,t)=>{"image/jpeg"===r.mimetype||"image/png"===r.mimetype?t(null,!0):t({message:"Unsopported file format"},!1)}});e.exports=s},882:(e,r,t)=>{const i=t(185),n=new i.Schema({name:{type:String,required:!0},email:{type:String,required:!0},passwort:{type:String,required:!0},publicId:String,imageUrl:String,radius:Number}),s=new i.Schema({lng:Number,lat:Number,country:String,city:String}),o=new i.Schema({name:{type:String,required:!0},description:String,location:s,type:String,publicImageId:String,imageUrl:String,userId:String},{timestamps:!0}),a=i.model("User",n),c=i.model("Location",s),d=i.model("Warning",o);e.exports={Warning:d,Location:c,User:a}},317:(e,r,t)=>{t(142).config();const i=t(518);i.config({cloud_name:process.env.CLOUD_NAME,api_key:process.env.API_KEY,api_secret:process.env.API_SECRET}),uploadToCloudinary=(e,r)=>i.v2.uploader.upload(e,{folder:r}).then((e=>({imageUrl:e.url,publicId:e.public_id}))).catch((e=>{console.log(e)})),e.exports=uploadToCloudinary},518:e=>{"use strict";e.exports=require("cloudinary")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},185:e=>{"use strict";e.exports=require("mongoose")},738:e=>{"use strict";e.exports=require("multer")}},r={};function t(i){var n=r[i];if(void 0!==n)return n.exports;var s=r[i]={exports:{}};return e[i](s,s.exports,t),s.exports}(()=>{const{urlencoded:e}=t(860),r=t(860),{Warning:i,Location:n,User:s}=t(882),o=t(317),a=t(954);t(427);const c=r();c.use(r.json()),c.use(e({extended:!0})),c.get("/",(async(e,r)=>{try{const e=await i.find();r.status(200).send(e)}catch(e){r.status(400).send(e)}})),c.post("/add-warning",a.single("image"),(async(e,r)=>{try{const t=await s.findById("637e89a5dae3e5065e2d2042"),a=new i({...e.body.warning,userId:t._id}),c=await a.save(),d=new n(e.body.location),u=await o(e.file.path,"warnings");await i.updateOne({_id:c._id},{$set:{location:d,imageUrl:u.imageUrl,publicImageId:u.publicId}}),r.status(200).send("New warning was posted successfully.")}catch(e){r.status(400).send(e)}})),c.listen(3e3,(()=>{console.log("Server is running on port 3000.")}))})()})();